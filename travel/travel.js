let dim = {
    "lund-img":{
       "top_c":0,
       "left_c":0,
       "width_c":0.2,
       "height_c":0.2630937880633374
    },
    "vienna-img":{
       "top_c":0,
       "left_c":0.2013888888888889,
       "width_c":0.15,
       "height_c":0.3507917174177832
    },
    "lisbon-img":{
       "top_c":0,
       "left_c":0.3527777777777778,
       "width_c":0.125,
       "height_c":0.14298538367844094
    },
    "rome-img":{
       "top_c":0,
       "left_c":0.4791666666666667,
       "width_c":0.3069986111111111,
       "height_c":0.22577222898903776
    },
    "cph-img":{
       "top_c":0,
       "left_c":0.7875542534722222,
       "width_c":0.10889722222222223,
       "height_c":0.22533495736906212
    },
    "malmo-img":{
       "top_c":0,
       "left_c":0.8978407118055556,
       "width_c":0.10059652777777778,
       "height_c":0.22474543239951278
    },
    "death-valley-img":{
       "top_c":0.2650159866017052,
       "left_c":0,
       "width_c":0.09919722222222221,
       "height_c":0.1739878197320341
    },
    "yosemite-img":{
       "top_c":0.2650159866017052,
       "left_c":0.1005859375,
       "width_c":0.09919722222222221,
       "height_c":0.1739878197320341
    },
    "san-diego-img":{
       "top_c":0.14600525645768309,
       "left_c":0.3525607638888889,
       "width_c":0.125,
       "height_c":0.38525822168087703
    },
    "oslo-img":{
       "top_c":0.22869594262665577,
       "left_c":0.4789496527777778,
       "width_c":0.17199444444444445,
       "height_c":0.3016711327649208
    },
    "ghent-img":{
       "top_c":0.22869594262665577,
       "left_c":0.6523328993055556,
       "width_c":0.17199444444444445,
       "height_c":0.3016711327649208
    },
    "prague-img":{
       "top_c":0.22869594262665577,
       "left_c":0.8257161458333333,
       "width_c":0.17199444444444445,
       "height_c":0.3016711327649208
    },
    "interlaken-img":{
       "top_c":0.4402053591394831,
       "left_c":0,
       "width_c":0.2,
       "height_c":0.3226626065773447
    },
    "london-img":{
       "top_c":0.3521862332045524,
       "left_c":0.2013888888888889,
       "width_c":0.15,
       "height_c":0.2630937880633374
    },
    "lugano-img":{
       "top_c":0.5332905517280755,
       "left_c":0.3527777777777778,
       "width_c":0.18999583333333334,
       "height_c":0.23007429963459194
    },
    "geneva-img":{
       "top_c":0.5337509545571331,
       "left_c":0.5441623263888888,
       "width_c":0.10649930555555556,
       "height_c":0.23033982947624848
    },
    "stockholm-img":{
       "top_c":0.5337725138693286,
       "left_c":0.65205078125,
       "width_c":0.24499791666666668,
       "height_c":0.23005481120584653
    },
    "madrid-img":{
       "top_c":0.5332321185577802,
       "left_c":0.8984375,
       "width_c":0.09949027777777777,
       "height_c":0.23053105968331303
    },
    "toledo-img":{
       "top_c":0.7645027262865408,
       "left_c":0,
       "width_c":0.11199027777777777,
       "height_c":0.23184409257003655
    },
    "budapest-img":{
       "top_c":0.6166719722399322,
       "left_c":0.20099457634819878,
       "width_c":0.15019513888888888,
       "height_c":0.14566869671132765
    },
    "zaragoza-img":{
       "top_c":0.7648000961099269,
       "left_c":0.11307833989461263,
       "width_c":0.09919722222222221,
       "height_c":0.2319768574908648
    },
    "lausanne-img":{
       "top_c":0.764827156763855,
       "left_c":0.21373382144504124,
       "width_c":0.17999166666666666,
       "height_c":0.2328721071863581
    },
    "milan-img":{
       "top_c":0.7649490040489875,
       "left_c":0.3951958550347222,
       "width_c":0.11999791666666666,
       "height_c":0.23277588306942754
    },
    "skardu-img":{
       "top_c":0.7653711205132842,
       "left_c":0.6523028903537327,
       "width_c":0.11549444444444446,
       "height_c":0.23062606577344702
    },
    "amalfi-img":{
       "top_c":0.7658188851248477,
       "left_c":0.7693192376030816,
       "width_c":0.22819027777777778,
       "height_c":0.22978806333739343
    },
    "naran-img":{
        "top_c":0.7656386046694199,
        "left_c":0.5164756774902344,
        "width_c":0.0659938888888889,
        "height_c":0.11677831912302071
     },
    "chicago-img":{
       "top_c":0.7656386046694199,
       "left_c":0.5842286003960504,
       "width_c":0.06659069444444445,
       "height_c":0.11677831912302071
    },
    "la-img":{
       "top_c":0.8847204247868453,
       "left_c":0.5164756774902344,
       "width_c":0.0659938888888889,
       "height_c":0.11575054811205847
    },
    "sf-img":{
       "top_c":0.8847865152300929,
       "left_c":0.5841756184895833,
       "width_c":0.06659069444444445,
       "height_c":0.1167973203410475
    }
}
let total_w = $(window).width();
let total_h = $(window).height();

$(document).ready(function(){
   console.log("document ready");
    $(".blank").height(total_h);
    $(".collage-img").each(function(){
        let img = $(this);
        let id = img.attr("id");
        let lbl = $("#" + id.replace("img", "lbl"));

        let h = dim[id]["height_c"] * total_h;
        let w = dim[id]["width_c"] * total_w;
        let top = dim[id]["top_c"] * total_h;
        let left = dim[id]["left_c"] * total_w;

        img.css({
            "height": h,
            "width": w,
            "top": top,
            "left": left
        });

        if (lbl){
            lbl.css({
                "height": h,
                "width": w,
                "top": top,
                "left": left
            });
            lbl.click(function(){
               let id = $(this).attr("id").replace("lbl", "div");
               let offset = parseInt($("#" + id).offset().top) - 40;
               $('html, body').animate({
                  scrollTop: offset
               }, offset/1.75);
            });
        }
    });

    let globe = $("#globe");
    let el = $("#text-container");

    setTimeout(function(){
        globe.fadeOut(500);
        globe.fadeIn(500);
        globe.fadeOut(500);
    }, 500);

    let padding = total_h/2 - el.height()/2 - 4;
    el.css("padding-top", padding + "px");

    setTimeout(()=>{
       console.log("start typing"); 
       globe.css("display", "none");
       el.css("display", "block");
       setTimeout(showSign, 4000);
    }, 2500);
});

$(window).on("load", function(){
   $(".collage-img").css("display", "block");
   $(".collage-lbl").css("display", "block");
})

function showSign(){
    let el = $("#signature");
    el.fadeIn(500);
    setTimeout(hideLayover, 1000);
}

function hideLayover(){
   $("#layover").fadeOut(2000);
   $("#destination-list").css("display", "flex");
}

/*
$(window).on("load", () => {
    //console.log($(window).width() + " x " + $(window).height());
    
    let dim = {}
    
    $(".collage-img").each(function(e){
        let el = $(this);
        let id = el.attr("id");
        let w = el.width()/total_w;
        let h = el.height()/total_h;
        let left = el.position().left/total_w;
        let top = el.position().top/total_h;
        let val = {
            "top_c": top,
            "left_c": left,
            "width_c": w,
            "height_c": h
        }
        
        dim[id] = val;

        //console.log(el.attr("id") + ": " + el.width() + " x " + el.height() +
        //                " at left: " + el.position().left + ", top: " + el.position().top);
    });
    console.log(JSON.stringify(dim));

    let w = dim["lund-img"]["width_c"] * total_w;
    let h = dim["lund-img"]["height_c"] * total_h;
    let top = dim["lund-img"]["top_c"] * total_h;
    let left = dim["lund-img"]["left_c"] * total_w;
    console.log(w + " x " + h + "; " + top + " and " + left);
});*/
